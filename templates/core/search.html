{% extends 'partials/base.html' %}
{% load static %}

{% block content %}
<div class="main_content">
    <div class="mcontainer">
        <h1 class="text-2xl font-bold mb-5">Search Results for "{{ query }}"</h1>

        <div class="mb-8">
            <h2 class="text-xl font-semibold mb-4">People</h2>
            {% if users %}
            <div class="grid md:grid-cols-4 sm:grid-cols-3 grid-cols-2 gap-4">
                {% for user in users %}
                <div class="card p-4 flex flex-col items-center text-center">
                    {% if user == request.user %}
                        {% url 'userauths:my-profile' as profile_url %}
                    {% else %}
                        {% url 'userauths:profile' user.username as profile_url %}
                    {% endif %}
                    <a href="{{ profile_url }}">
                        <img src="{{ user.profile.image.url }}" class="w-24 h-24 rounded-full object-cover mb-3" alt="">
                    </a>
                    <a href="{{ profile_url }}" class="font-semibold text-lg">{{ user.profile.full_name }}</a>
                    <p class="text-gray-500 text-sm">@{{ user.username }}</p>
                    <a href="{{ profile_url }}" class="mt-3 button bg-blue-100 text-blue-600 w-full">View Profile</a>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p class="text-gray-500">No people found.</p>
            {% endif %}
        </div>

        <div>
            <h2 class="text-xl font-semibold mb-4">Items</h2>
            {% if products %}
            <div class="grid md:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-4">
                {% for product in products %}
                <div class="card">
                    <a href="{% url 'core:item-detail' product.slug %}">
                        <img src="{{ product.image.url }}" class="h-48 w-full object-cover rounded-t-md" alt="">
                    </a>
                    <div class="p-3">
                        <a href="{% url 'core:item-detail' product.slug %}" class="font-semibold text-lg block truncate">{{ product.title }}</a>
                        <p class="text-blue-600 font-bold mt-1">RM {{ product.daily_rate }} / day</p>
                        <p class="text-gray-500 text-sm mt-1 flex items-center">
                            <ion-icon name="location-outline" class="mr-1"></ion-icon> {{ product.location }}
                        </p>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p class="text-gray-500">No items found.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}