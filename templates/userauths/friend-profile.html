{% extends 'partials/base.html' %} {% load static %} {% block content %}

<!-- Hidden input to store current user ID for JavaScript -->
<input type="hidden" id="current-user-id" value="{{ request.user.id }}" />

<!-- Main Contents -->
<div class="main_content">
  <div class="mcontainer">
    <!-- Profile cover -->
    <div class="profile user-profile">
      <div class="profiles_banner">
        <img src="{{profile.cover_image.url}}" alt="" />
      </div>
      <div class="profiles_content">
        <div class="profile_avatar">
          <div class="profile_avatar_holder">
            <img src="{{profile.user.profile.image.url}}" alt="" />
          </div>
          <div class="user_status status_online"></div>
          <div class="icon_change_photo" hidden>
            <ion-icon name="camera" class="text-xl"></ion-icon>
          </div>
        </div>

        <div class="profile_info">
          <h1>{{profile.user.profile.full_name}}</h1>
          <p class="text-center">{{profile.user.profile.bio}}</p>
        </div>
      </div>

      <div
        class="flex justify-between lg:border-t border-gray-100 flex-col-reverse lg:flex-row pt-2"
      >
        <nav class="responsive-nav pl-3">
          <ul
            uk-switcher="connect: #timeline-tab; animation: uk-animation-fade"
          >
            <li><a href="#">Timeline</a></li>
            <li>
              <a href="#"
                >Friends
                <span>{{ friend_count }}</span>
              </a>
            </li>
            <li>
              <a href="#"
                >Rental Item Listing <span>{{ products.count }}</span>
              </a>
            </li>
            <li><a href="#">Looking For Rent</a></li>
          </ul>
        </nav>

        <!-- button actions -->
        <div
          class="flex items-center space-x-1.5 flex-shrink-0 pr-4 mb-2 justify-center order-1 relative"
        >
          {% if profile.user != request.user %}
          <!-- add friend / unfriend button -->
          {% if bool_friend %}
          <a
            class="unfriend-btn flex items-center justify-center h-10 px-5 rounded-md bg-red-600 text-white space-x-1.5 hover:text-white unfriend{{profile.user.id}}"
            data-unfriend="{{profile.user.id}}"
            href="#"
          >
            <span class="unfriend-text"
              ><i class="fas fa-user-minus"></i> Unfollow
            </span>
          </a>
          {% else %}
          <a
            class="add-friend-btn flex items-center justify-center h-10 px-5 rounded-md bg-blue-600 text-white space-x-1.5 hover:text-white add-friend{{profile.user.id}}"
            data-friend-id="{{profile.user.id}}"
            href="#"
          >
            <span class="friend-text"
              ><i class="fas fa-user-plus"></i> Follow
            </span>
          </a>
          {% endif %}

          <a
            href="{% url 'core:messages' %}?user_id={{ profile.user.id }}"
            class="flex items-center justify-center h-10 px-5 rounded-md bg-blue-600 text-white space-x-1.5"
          >
            <ion-icon
              name="chatbubble-ellipses-outline"
              class="text-xl"
            ></ion-icon>
            <span>Message</span>
          </a>
          {% endif %}

          <!-- more icon -->
          <a
            href="#"
            class="flex items-center justify-center h-10 w-10 rounded-md bg-gray-100"
          >
            <ion-icon name="ellipsis-horizontal" class="text-xl"></ion-icon>
          </a>
          <!-- more drowpdown -->
          <div
            class="bg-white w-56 shadow-md mx-auto p-2 mt-12 rounded-md text-gray-500 hidden border border-gray-100 dark:bg-gray-900 dark:text-gray-100 dark:border-gray-700"
            uk-drop="mode: click;pos: bottom-right;animation: uk-animation-slide-bottom-small; offset:5"
          >
            <ul class="space-y-1">
              <li>
                <a
                  href="#"
                  class="flex items-center px-3 py-2 hover:bg-gray-100 hover:text-gray-800 rounded-md dark:hover:bg-gray-800"
                >
                  <ion-icon
                    name="arrow-redo-outline"
                    class="pr-2 text-xl"
                  ></ion-icon>
                  Share Profile
                </a>
              </li>
              <li>
                <a
                  href="#report-user-modal"
                  uk-toggle
                  class="flex items-center px-3 py-2 hover:bg-gray-100 hover:text-gray-800 rounded-md dark:hover:bg-gray-800"
                >
                  <ion-icon name="flag-outline" class="pr-2 text-xl"></ion-icon>
                  Report
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="uk-switcher lg:mt-8 mt-4" id="timeline-tab">
      <!-- Timeline -->
      <div class="md:flex md:justify-center lg:px-16">
        <div class="space-y-5 flex-shrink-0 w-full max-w-2xl mx-auto">
          <!-- Post Div -->
          <div class="post-div" data-purpose="timeline">
            {% for p in general_posts %}
            <div
              class="card lg:mx-0 uk-animation-slide-bottom-small mt-3 mb-3"
              id="post-card-{{p.id}}"
            >
              <!-- post header-->
              <div class="flex justify-between items-center lg:p-4 p-2.5">
                <div class="flex flex-1 items-center space-x-4">
                  <a href="#">
                    {% if p.user.profile and p.user.profile.image %}
                    <img
                      src="{{ p.user.profile.image.url }}"
                      class="bg-gray-200 border border-white rounded-full w-10 h-10"
                    />
                    {% else %}
                    <img
                      src="{% static 'assets/images/avatars/avatar-2.jpg' %}"
                      class="bg-gray-200 border border-white rounded-full w-10 h-10"
                    />
                    {% endif %}
                  </a>
                  <div class="flex-1 font-semibold capitalize">
                    <a href="#" class="text-black dark:text-gray-100">
                      {{p.user}}
                    </a>
                    <div class="text-gray-700 flex items-center space-x-2">
                      <span><small>{{p.date|timesince}} ago</small></span>
                      <ion-icon name="story-time"></ion-icon>
                    </div>
                  </div>
                </div>
                <div>
                  <a href="#">
                    <i
                      class="icon-feather-more-horizontal text-2xl hover:bg-gray-200 rounded-full p-2 transition -mr-1 dark:hover:bg-gray-700"
                    ></i>
                  </a>
                  <div
                    class="bg-white w-56 shadow-md mx-auto p-2 mt-12 rounded-md text-gray-500 hidden text-base border border-gray-100 dark:bg-gray-900 dark:text-gray-100 dark:border-gray-700"
                    uk-drop="mode: click;pos: bottom-right;animation: uk-animation-slide-bottom-small"
                  >
                    <ul class="space-y-1">
                      <li>
                        <a
                          id="save-post-btn-timeline-{{p.id}}"
                          data-post-id="{{p.id}}"
                          class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800 cursor-pointer save-post-btn"
                        >
                          <i class="uil-bookmark mr-1"></i>
                          <span class="save-text"
                            >{% if request.user in p.saved.all %} Unsave Post {%
                            else %} Save Post {% endif %}</span
                          >
                        </a>
                      </li>
                      <li>
                        <hr class="-mx-2 my-2 dark:border-gray-800" />
                      </li>
                      {% if p.user == request.user %}
                      <li>
                        <a
                          href="#"
                          class="flex items-center px-3 py-2 text-red-500 hover:bg-red-100 hover:text-red-500 rounded-md dark:hover:bg-red-600 delete-post-btn"
                          data-post-id="{{p.id}}"
                        >
                          <i class="uil-trash-alt mr-1"></i> Delete
                        </a>
                      </li>
                      {% endif %}
                    </ul>
                  </div>
                </div>
              </div>

              {% if p.title %}
              <div class="p-5 pt-0 border-b dark:border-gray-700">
                {{p.title}}
              </div>
              {% endif %} {% if p.post_thumbnail.all %}
              <div uk-lightbox class="grid grid-cols-2 gap-2">
                {% for img in p.post_thumbnail.all %}
                <a href="{{ img.image.url }}">
                  <img
                    src="{{ img.image.url }}"
                    alt=""
                    class="max-h-96 w-full object-cover rounded-md"
                  />
                </a>
                {% endfor %}
              </div>
              {% endif %}

              <!-- Product/Item Details (for Open for Rent posts) -->
              {% if p.product %}
              <div class="p-5 pt-3 border-b dark:border-gray-700">
                <a
                  href="{% url 'core:item-detail' p.product.slug %}"
                  class="flex space-x-3 items-start bg-gray-50 dark:bg-gray-800 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition"
                >
                  <img
                    src="{{ p.product.image.url }}"
                    class="w-20 h-20 rounded-md object-cover"
                    alt="{{ p.product.title }}"
                  />
                  <div class="flex-1 space-y-1">
                    <div class="font-semibold text-gray-800 dark:text-gray-100">
                      {{ p.product.title }}
                    </div>
                    {% if p.product.description %}
                    <div class="text-sm text-gray-600 dark:text-gray-400">
                      {{ p.product.description }}
                    </div>
                    {% endif %} {% if p.product.location %}
                    <div class="text-sm text-gray-600 dark:text-gray-400">
                      <i class="uil-map-marker"></i> {{ p.product.location }}
                    </div>
                    {% endif %}
                    <div
                      class="text-sm font-medium text-blue-600 dark:text-blue-400"
                    >
                      Daily rate: RM {{ p.product.daily_rate }}
                    </div>
                  </div>
                </a>
              </div>
              {% endif %}

              <div class="p-4 space-y-3">
                <div class="flex space-x-4 lg:font-bold">
                  <a
                    style="cursor: pointer"
                    class="flex items-center space-x-2"
                  >
                    <div
                      class="p-2 rounded-full like-btn{{p.id}} {% if request.user in p.likes.all %}text-blue-500 {% else %} text-black {% endif %} "
                      id="like-btn"
                      data-like-btn="{{p.id}}"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                        width="22"
                        height="22"
                        class="dark:text-gray-100"
                      >
                        <path
                          d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z"
                        />
                      </svg>
                    </div>
                    <div>Like</div>
                  </a>
                  <a href="#" class="flex items-center space-x-2">
                    <div
                      class="p-2 rounded-full text-black lg:bg-gray-100 dark:bg-gray-600"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                        width="22"
                        height="22"
                        class="dark:text-gray-100"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z"
                          clip-rule="evenodd"
                        />
                      </svg>
                    </div>
                    <div>
                      <span id="comment-count{{p.id}}"
                        >{{p.post_comment.count}}</span
                      >
                      Comment
                    </div>
                  </a>
                  <a
                    href="#"
                    class="flex items-center space-x-2 flex-1 justify-end"
                  >
                    <div
                      class="p-2 rounded-full text-black lg:bg-gray-100 dark:bg-gray-600"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                        width="22"
                        height="22"
                        class="dark:text-gray-100"
                      >
                        <path
                          d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"
                        />
                      </svg>
                    </div>
                    <div>Share</div>
                  </a>
                </div>
                <div class="flex items-center space-x-3 pt-3">
                  {% if p.likes.all.count > 0 %}
                  <div class="flex items-center">
                    {% for i in p.likes.all|slice:"3" %} {% if forloop.first %}
                    <img
                      src="{{i.profile.image.url}}"
                      alt=""
                      class="w-6 h-6 rounded-full border-2 border-white dark:border-gray-900"
                    />
                    {% else %}
                    <img
                      src="{{i.profile.image.url}}"
                      alt=""
                      class="w-6 h-6 rounded-full border-2 border-white dark:border-gray-900 -ml-2"
                    />
                    {% endif %} {% endfor %}
                  </div>
                  <div class="dark:text-gray-100">
                    <strong
                      ><span id="like-count{{p.id}}"
                        >{{p.likes.all.count}}</span
                      ></strong
                    >
                    Like
                  </div>
                  {% else %}<!--if post no like-->
                  <div class="dark:text-gray-100">
                    <strong> <span id="like-count{{p.id}}">0</span> </strong>
                    Like
                  </div>
                  {% endif %}
                </div>

                <div
                  class="border-t py-4 space-y-4 dark:border-gray-600"
                  id="comment-div{{p.id}}"
                >
                  <!--identify actual comment-->
                  {% for c in p.post_comment|slice:"2" %}
                  <div class="flex card shadow p-2" id="comment-div{{c.id}}">
                    <div class="w-10 h-10 rounded-full relative flex-shrink-0">
                      <img
                        src="{{c.user.profile.image.url}}"
                        alt=""
                        class="absolute h-full rounded-full w-full"
                      />
                    </div>
                    <div>
                      <div
                        class="text-gray-700 py-2 px-3 rounded-md bg-gray-100 relative lg:ml-5 ml-2 lg:mr-12 dark:bg-gray-800 dark:text-gray-100 flex items-center"
                      >
                        <p class="leading-6 flex-grow">{{c.comment}}</p>
                        <!--nak tgk if comment tu milik logged in user or not-->
                        {% if c.user == request.user %}
                        <button
                          class="ml-auto text-xs"
                          id="delete-comment"
                          data-delete-comment="{{c.id}}"
                        >
                          <i class="fas fa-trash text-red-500"> </i>
                        </button>
                        {% endif %}
                      </div>

                      <!--like comment-->
                      <div
                        class="text-sm flex items-center space-x-3 mt-2 ml-5"
                      >
                        <a
                          id="like-comment-btn"
                          data-like-comment="{{c.id}}"
                          class="like-comment{{c.id}}"
                          {%
                          if
                          request.user
                          in
                          c.likes.all
                          %}
                          style="color: red; cursor: pointer"
                          {%
                          else
                          %}
                          style="color: gray; cursor: pointer"
                          {%
                          endif
                          %}
                        >
                          <i class="fas fa-heart"></i>
                        </a>
                        <small
                          ><span id="comment-likes-count{{c.id}}"
                            >{{c.likes.all.count}}</span
                          ></small
                        >
                        <!--Add Reply Comment Element-->
                        <details>
                          <summary><div class="">Reply</div></summary>
                          <details-menu
                            role="menu"
                            class="origin-topf-right relative right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focue:outline-none"
                          >
                            <div class="pfy-1" role="none">
                              <div class="p-1 d-flex">
                                <input
                                  type="text"
                                  class="with-border"
                                  name=""
                                  placeholder="Write Reply"
                                  id="reply-input{{c.id}}"
                                />
                                <button
                                  id="reply-comment-btn"
                                  data-reply-comment-btn="{{c.id}}"
                                  type="submit"
                                  class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900 data-reply-comment-btn{{c.id}}"
                                  role="menuitem"
                                >
                                  <ion-icon name="send"></ion-icon>
                                </button>
                              </div>
                            </div>
                          </details-menu>
                        </details>
                        <span> <small> {{c.date|timesince}} </small> </span>
                      </div>
                      <!--Comment replies-->
                      <div class="reply-div{{c.id}}">
                        {% for r in c.comment_replies|slice:"1" %}
                        <div
                          class="flex mr-12 mb-2 mt-2"
                          style="margin-right: 20px"
                        >
                          <div
                            class="w-10 h-10 rounded-full relative flex-shrink-0"
                          >
                            <img
                              src="{{r.user.profile.image.url}}"
                              style="width: 40px; height: 40px"
                              alt=""
                              class="absolute h-full rounded-full w-full"
                            />
                          </div>
                          <div>
                            <div
                              class="text-gray-700 py-2 px-3 rounded-md bg-gray-100 relative lg:ml-5 ml-2 lg:mr-12 dark:bg-gray-800 dark:text-gray-100"
                            >
                              <p class="leading-6">{{r.reply}}</p>
                              <div
                                class="absolute w-3 h-3 top-3 -left-1 bg-gray-100 transform rotate-45 dark:bg-gray-800"
                              ></div>
                            </div>
                          </div>
                        </div>
                        {% endfor %}
                      </div>
                    </div>
                  </div>
                  {% empty %}
                  <div class="flex">
                    <div>
                      <div
                        class="text-gray-700 py-2 px-3 rounded-md bg-gray-100 relative lg:ml-5 ml-2 lg:mr-12 dark:bg-gray-800 dark:text-gray-100"
                      >
                        <p class="leading-6">No Comments Yet</p>
                      </div>
                    </div>
                  </div>
                  {% endfor %}
                </div>

                {% if p.post_comment.count > 0 %}
                <a
                  href="{% url 'core:post-detail' p.slug %}"
                  class="hover:text-blue-600 hover:underline"
                >
                  View All {{p.post_comment.count}} Comments</a
                >
                {% endif %}

                <div
                  class="bg-gray-100 rounded-full relative dark:bg-gray-800 border-t"
                >
                  <input
                    placeholder="Add your Comment.."
                    id="comment-input{{p.id}}"
                    data-comment-input="{{p.id}}"
                    class="bg-transparent max-h-10 shadow-none px-5"
                    comment-input{{p.id}}
                  />
                  <div
                    class="-m-0.5 absolute bottom-0 flex items-center right-3 text-xl"
                  >
                    <a
                      style="cursor: pointer"
                      id="comment-btn"
                      class="comment-btn{{p.id}}"
                      data-comment-btn="{{p.id}}"
                    >
                      <ion-icon
                        name="send-outline"
                        class="hover:bg-gray-200 p-1.5 rounded-full"
                      ></ion-icon>
                    </a>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>

      <!-- Friends  -->
      <div class="card md:p-6 p-2 max-w-3xl mx-auto">
        <h2 class="text-xl font-semibold">Friends</h2>

        <nav class="responsive-nav border-b">
          <ul>
            <li class="active">
              <a href="#" class="lg:px-2">
                All Friends <span> {{ friend_count }} </span>
              </a>
            </li>
          </ul>
        </nav>

        <div
          class="grid md:grid-cols-4 sm:grid-cols-3 grid-cols-2 gap-x-2 gap-y-4 mt-3"
        >
          {% for friend_data in friends %}
          <div class="card p-2">
            <a
              href="{% url 'userauths:profile' friend_data.friend_obj.friend.username %}"
            >
              <img
                src="{{friend_data.friend_obj.friend.profile.image.url}}"
                class="h-36 object-cover rounded-md shadow-sm w-full"
              />
            </a>
            <div class="pt-3 px-1">
              <a
                href="{% url 'userauths:profile' friend_data.friend_obj.friend.username %}"
                class="text-base font-semibold mb-0.5"
              >
                {{friend_data.friend_obj.friend.profile.full_name|default:friend_data.friend_obj.friend.username}}
              </a>
              <p class="font-medium text-sm">
                {{ friend_data.friend_count }} Friend{% if friend_data.friend_count != 1 %}s{% endif %}
              </p>
            </div>
          </div>
          {% empty %}
          <div class="col-span-full text-center text-gray-500 py-8">
            No friends yet
          </div>
          {% endfor %}
        </div>
      </div>

      <!-- Item listing  -->
      <div class="card md:p-6 p-2 max-w-3xl mx-auto">
        <div class="flex justify-between items-center md:mb-4 mb-3">
          <h2 class="text-xl font-bold">Rental Item Listing</h2>
        </div>

        <!-- Items Grid -->
        {% if products %}
        <div class="grid md:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-4 mt-6">
          {% for product in products %}
          <div class="card">
            <a href="{% url 'core:item-detail' product.slug %}">
              <img
                src="{{ product.image.url }}"
                class="h-48 object-cover rounded-t-md shadow-sm w-full"
              />
            </a>
            <div class="p-3">
              <a
                href="{% url 'core:item-detail' product.slug %}"
                class="text-base font-semibold mb-1"
              >
                {{ product.title }}
              </a>
              <p class="font-medium text-sm text-gray-600">
                RM {{ product.daily_rate|floatformat:2 }} / day
              </p>
            </div>
          </div>
          {% endfor %}
        </div>
        {% else %}
        <div class="flex justify-center mt-6">
          <p class="text-gray-500">There are no items added</p>
        </div>
        {% endif %}
      </div>

      <!-- Looking For Rent  -->
      <div class="md:flex md:justify-center lg:px-16">
        <div class="space-y-5 flex-shrink-0 w-full max-w-2xl mx-auto">
          <!-- Post Div -->
          <div class="post-div" data-purpose="looking">
            {% if looking_posts %} {% for p in looking_posts %}
            <div
              class="card lg:mx-0 uk-animation-slide-bottom-small mt-3 mb-3"
              id="post-card-{{p.id}}"
            >
              <!-- post header-->
              <div class="flex justify-between items-center lg:p-4 p-2.5">
                <div class="flex flex-1 items-center space-x-4">
                  <a href="#">
                    {% if p.user.profile and p.user.profile.image %}
                    <img
                      src="{{ p.user.profile.image.url }}"
                      class="bg-gray-200 border border-white rounded-full w-10 h-10"
                    />
                    {% else %}
                    <img
                      src="{% static 'assets/images/avatars/avatar-2.jpg' %}"
                      class="bg-gray-200 border border-white rounded-full w-10 h-10"
                    />
                    {% endif %}
                  </a>
                  <div class="flex-1 font-semibold capitalize">
                    <a href="#" class="text-black dark:text-gray-100">
                      {{p.user}}
                    </a>
                    <div class="text-gray-700 flex items-center space-x-2">
                      <span><small>{{p.date|timesince}} ago</small></span>
                      <ion-icon name="story-time"></ion-icon>
                    </div>
                  </div>
                </div>
                <div>
                  <a href="#">
                    <i
                      class="icon-feather-more-horizontal text-2xl hover:bg-gray-200 rounded-full p-2 transition -mr-1 dark:hover:bg-gray-700"
                    ></i>
                  </a>
                  <div
                    class="bg-white w-56 shadow-md mx-auto p-2 mt-12 rounded-md text-gray-500 hidden text-base border border-gray-100 dark:bg-gray-900 dark:text-gray-100 dark:border-gray-700"
                    uk-drop="mode: click;pos: bottom-right;animation: uk-animation-slide-bottom-small"
                  >
                    <ul class="space-y-1">
                      <li>
                        <a
                          id="save-post-btn-timeline-{{p.id}}"
                          data-post-id="{{p.id}}"
                          class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800 cursor-pointer save-post-btn"
                        >
                          <i class="uil-bookmark mr-1"></i>
                          <span class="save-text"
                            >{% if request.user in p.saved.all %} Unsave Post {%
                            else %} Save Post {% endif %}</span
                          >
                        </a>
                      </li>
                      <li>
                        <hr class="-mx-2 my-2 dark:border-gray-800" />
                      </li>
                      {% if p.user == request.user %}
                      <li>
                        <a
                          href="#"
                          class="flex items-center px-3 py-2 text-red-500 hover:bg-red-100 hover:text-red-500 rounded-md dark:hover:bg-red-600 delete-post-btn"
                          data-post-id="{{p.id}}"
                        >
                          <i class="uil-trash-alt mr-1"></i> Delete
                        </a>
                      </li>
                      {% endif %}
                    </ul>
                  </div>
                </div>
              </div>

              {% if p.title %}
              <div class="p-5 pt-0 border-b dark:border-gray-700">
                {{p.title}}
              </div>
              {% endif %} {% if p.post_thumbnail.all %}
              <div uk-lightbox class="grid grid-cols-2 gap-2">
                {% for img in p.post_thumbnail.all %}
                <a href="{{ img.image.url }}">
                  <img
                    src="{{ img.image.url }}"
                    alt=""
                    class="max-h-96 w-full object-cover rounded-md"
                  />
                </a>
                {% endfor %}
              </div>
              {% endif %}

              <!-- Product/Item Details (for Open for Rent posts) -->
              {% if p.product %}
              <div class="p-5 pt-3 border-b dark:border-gray-700">
                <a
                  href="{% url 'core:item-detail' p.product.slug %}"
                  class="flex space-x-3 items-start bg-gray-50 dark:bg-gray-800 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition"
                >
                  <img
                    src="{{ p.product.image.url }}"
                    class="w-20 h-20 rounded-md object-cover"
                    alt="{{ p.product.title }}"
                  />
                  <div class="flex-1 space-y-1">
                    <div class="font-semibold text-gray-800 dark:text-gray-100">
                      {{ p.product.title }}
                    </div>
                    {% if p.product.description %}
                    <div class="text-sm text-gray-600 dark:text-gray-400">
                      {{ p.product.description }}
                    </div>
                    {% endif %} {% if p.product.location %}
                    <div class="text-sm text-gray-600 dark:text-gray-400">
                      <i class="uil-map-marker"></i> {{ p.product.location }}
                    </div>
                    {% endif %}
                    <div
                      class="text-sm font-medium text-blue-600 dark:text-blue-400"
                    >
                      Daily rate: RM {{ p.product.daily_rate }}
                    </div>
                  </div>
                </a>
              </div>
              {% endif %}

              <div class="p-4 space-y-3">
                <div class="flex space-x-4 lg:font-bold">
                  <a
                    style="cursor: pointer"
                    class="flex items-center space-x-2"
                  >
                    <div
                      class="p-2 rounded-full like-btn{{p.id}} {% if request.user in p.likes.all %}text-blue-500 {% else %} text-black {% endif %} "
                      id="like-btn"
                      data-like-btn="{{p.id}}"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                        width="22"
                        height="22"
                        class="dark:text-gray-100"
                      >
                        <path
                          d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z"
                        />
                      </svg>
                    </div>
                    <div>Like</div>
                  </a>
                  <a href="#" class="flex items-center space-x-2">
                    <div
                      class="p-2 rounded-full text-black lg:bg-gray-100 dark:bg-gray-600"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                        width="22"
                        height="22"
                        class="dark:text-gray-100"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z"
                          clip-rule="evenodd"
                        />
                      </svg>
                    </div>
                    <div>
                      <span id="comment-count{{p.id}}"
                        >{{p.post_comment.count}}</span
                      >
                      Comment
                    </div>
                  </a>
                  <a
                    href="#"
                    class="flex items-center space-x-2 flex-1 justify-end"
                  >
                    <div
                      class="p-2 rounded-full text-black lg:bg-gray-100 dark:bg-gray-600"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                        width="22"
                        height="22"
                        class="dark:text-gray-100"
                      >
                        <path
                          d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"
                        />
                      </svg>
                    </div>
                    <div>Share</div>
                  </a>
                </div>
                <div class="flex items-center space-x-3 pt-3">
                  {% if p.likes.all.count > 0 %}
                  <div class="flex items-center">
                    {% for i in p.likes.all|slice:"3" %} {% if forloop.first %}
                    <img
                      src="{{i.profile.image.url}}"
                      alt=""
                      class="w-6 h-6 rounded-full border-2 border-white dark:border-gray-900"
                    />
                    {% else %}
                    <img
                      src="{{i.profile.image.url}}"
                      alt=""
                      class="w-6 h-6 rounded-full border-2 border-white dark:border-gray-900 -ml-2"
                    />
                    {% endif %} {% endfor %}
                  </div>
                  <div class="dark:text-gray-100">
                    <strong
                      ><span id="like-count{{p.id}}"
                        >{{p.likes.all.count}}</span
                      ></strong
                    >
                    Like
                  </div>
                  {% else %}<!--if post no like-->
                  <div class="dark:text-gray-100">
                    <strong> <span id="like-count{{p.id}}">0</span> </strong>
                    Like
                  </div>
                  {% endif %}
                </div>

                <div
                  class="border-t py-4 space-y-4 dark:border-gray-600"
                  id="comment-div{{p.id}}"
                >
                  <!--identify actual comment-->
                  {% for c in p.post_comment|slice:"2" %}
                  <div class="flex card shadow p-2" id="comment-div{{c.id}}">
                    <div class="w-10 h-10 rounded-full relative flex-shrink-0">
                      <img
                        src="{{c.user.profile.image.url}}"
                        alt=""
                        class="absolute h-full rounded-full w-full"
                      />
                    </div>
                    <div>
                      <div
                        class="text-gray-700 py-2 px-3 rounded-md bg-gray-100 relative lg:ml-5 ml-2 lg:mr-12 dark:bg-gray-800 dark:text-gray-100 flex items-center"
                      >
                        <p class="leading-6 flex-grow">{{c.comment}}</p>
                        <!--nak tgk if comment tu milik logged in user or not-->
                        {% if c.user == request.user %}
                        <button
                          class="ml-auto text-xs"
                          id="delete-comment"
                          data-delete-comment="{{c.id}}"
                        >
                          <i class="fas fa-trash text-red-500"> </i>
                        </button>
                        {% endif %}
                      </div>

                      <!--like comment-->
                      <div
                        class="text-sm flex items-center space-x-3 mt-2 ml-5"
                      >
                        <a
                          id="like-comment-btn"
                          data-like-comment="{{c.id}}"
                          class="like-comment{{c.id}}"
                          {%
                          if
                          request.user
                          in
                          c.likes.all
                          %}
                          style="color: red; cursor: pointer"
                          {%
                          else
                          %}
                          style="color: gray; cursor: pointer"
                          {%
                          endif
                          %}
                        >
                          <i class="fas fa-heart"></i>
                        </a>
                        <small
                          ><span id="comment-likes-count{{c.id}}"
                            >{{c.likes.all.count}}</span
                          ></small
                        >
                        <!--Add Reply Comment Element-->
                        <details>
                          <summary><div class="">Reply</div></summary>
                          <details-menu
                            role="menu"
                            class="origin-topf-right relative right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focue:outline-none"
                          >
                            <div class="pfy-1" role="none">
                              <div class="p-1 d-flex">
                                <input
                                  type="text"
                                  class="with-border"
                                  name=""
                                  placeholder="Write Reply"
                                  id="reply-input{{c.id}}"
                                />
                                <button
                                  id="reply-comment-btn"
                                  data-reply-comment-btn="{{c.id}}"
                                  type="submit"
                                  class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900 data-reply-comment-btn{{c.id}}"
                                  role="menuitem"
                                >
                                  <ion-icon name="send"></ion-icon>
                                </button>
                              </div>
                            </div>
                          </details-menu>
                        </details>
                        <span> <small> {{c.date|timesince}} </small> </span>
                      </div>
                      <!--Comment replies-->
                      <div class="reply-div{{c.id}}">
                        {% for r in c.comment_replies|slice:"1" %}
                        <div
                          class="flex mr-12 mb-2 mt-2"
                          style="margin-right: 20px"
                        >
                          <div
                            class="w-10 h-10 rounded-full relative flex-shrink-0"
                          >
                            <img
                              src="{{r.user.profile.image.url}}"
                              style="width: 40px; height: 40px"
                              alt=""
                              class="absolute h-full rounded-full w-full"
                            />
                          </div>
                          <div>
                            <div
                              class="text-gray-700 py-2 px-3 rounded-md bg-gray-100 relative lg:ml-5 ml-2 lg:mr-12 dark:bg-gray-800 dark:text-gray-100"
                            >
                              <p class="leading-6">{{r.reply}}</p>
                              <div
                                class="absolute w-3 h-3 top-3 -left-1 bg-gray-100 transform rotate-45 dark:bg-gray-800"
                              ></div>
                            </div>
                          </div>
                        </div>
                        {% endfor %}
                      </div>
                    </div>
                  </div>
                  {% empty %}
                  <div class="flex">
                    <div>
                      <div
                        class="text-gray-700 py-2 px-3 rounded-md bg-gray-100 relative lg:ml-5 ml-2 lg:mr-12 dark:bg-gray-800 dark:text-gray-100"
                      >
                        <p class="leading-6">No Comments Yet</p>
                      </div>
                    </div>
                  </div>
                  {% endfor %}
                </div>

                {% if p.post_comment.count > 0 %}
                <a
                  href="{% url 'core:post-detail' p.slug %}"
                  class="hover:text-blue-600 hover:underline"
                >
                  View All {{p.post_comment.count}} Comments</a
                >
                {% endif %}

                <div
                  class="bg-gray-100 rounded-full relative dark:bg-gray-800 border-t"
                >
                  <input
                    placeholder="Add your Comment.."
                    id="comment-input{{p.id}}"
                    data-comment-input="{{p.id}}"
                    class="bg-transparent max-h-10 shadow-none px-5"
                    comment-input{{p.id}}
                  />
                  <div
                    class="-m-0.5 absolute bottom-0 flex items-center right-3 text-xl"
                  >
                    <a
                      style="cursor: pointer"
                      id="comment-btn"
                      class="comment-btn{{p.id}}"
                      data-comment-btn="{{p.id}}"
                    >
                      <ion-icon
                        name="send-outline"
                        class="hover:bg-gray-200 p-1.5 rounded-full"
                      ></ion-icon>
                    </a>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %} {% else %}
            <div class="flex justify-center mt-6">
              <p class="text-gray-500">No looking for rent posts yet.</p>
            </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Create post modal -->
<div id="create-post-modal" class="create-post is-story" uk-modal>
  <div
    class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical rounded-lg p-0 lg:w-5/12 relative shadow-2xl uk-animation-slide-bottom-small"
  >
    <form id="post-form" method="post" enctype="multipart/form-data">
      <!--prevent cross site forgery-->
      {% csrf_token %}
      <div class="text-center py-3 border-b">
        <h3 class="text-lg font-semibold">Create Post</h3>
        <button
          class="uk-modal-close-default bg-gray-100 rounded-full p-2.5 right-2"
          type="button"
          uk-close
          uk-tooltip="title: Close ; pos: bottom ;offset:7"
        ></button>
      </div>
      <div class="flex flex-1 items-start space-x-4 p-5">
        <img
          src="{{request.user.profile.image.url}}"
          class="bg-gray-200 border border-white rounded-full w-11 h-11"
        />
        <div class="flex-1 pt-2">
          <textarea
            id="post-caption"
            class="uk-textare text-black shadow-none focus:shadow-none text-xl font-medium resize-none"
            rows="5"
            placeholder="Wanna rent something {{profile.user|title}}?"
          ></textarea>
        </div>
      </div>

      <!-- post image preview -->
      <div class="flex flex-1 p-5 w-100">
        <div class="flex-1 pt-2">
          <img
            src="https://joadre.com/wp-content/uploads/2019/02/no-image.jpg"
            id="preview_post_thumbnail"
            style="
              width: 100%;
              height: 200px;
              object-fit: cover;
              border-radius: 10px;
            "
            alt=""
            for="post-thumbnail"
          />
        </div>
      </div>

      <div class="bsolute bottom-0 p-4 space-x-4 w-full">
        <div
          class="flex bg-gray-50 border border-purple-100 rounded-2xl p-2 shadow-sm items-center"
        >
          <div class="lg:block hidden ml-1">Add to your post</div>
          <div
            class="flex flex-1 items-center lg:justify-end justify-center space-x-2"
          >
            <label for="post-thumbnail">
              <svg
                class="bg-blue-100 h-9 p-1.5 rounded-full text-blue-600 w-9 cursor-pointer"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
                ></path>
              </svg>
            </label>
            <input
              type="file"
              class="d-none"
              name="post-thumbnail"
              id="post-thumbnail"
              onchange="loadFile(event)"
            />
          </div>
        </div>
      </div>
      <div class="flex items-center w-full justify-between border-t p-3">
        <select id="visibility" class="selectpicker mt-2 story">
          <option value="General">General</option>
          <option value="Open for Rent">Open for Rent</option>
          <option value="Looking to Rent">Looking to Rent</option>
        </select>

        <div class="flex space-x-2">
          <button
            type="submit"
            id="share-post"
            class="bg-blue-600 flex h-9 items-center justify-center rounded-md text-white px-5 font-medium"
          >
            Share
          </button>
        </div>
      </div>
    </form>
  </div>
</div>

<!-- Create new album -->

<div id="offcanvas-create" uk-offcanvas="flip: true; overlay: true">
  <div
    class="uk-offcanvas-bar lg:w-4/12 w-full dark:bg-gray-700 dark:text-gray-300 p-0 bg-white flex flex-col justify-center"
  >
    <button class="uk-offcanvas-close absolute" type="button" uk-close></button>

    <!-- notivication header -->
    <div class="-mb-1 border-b font-semibold px-5 py-5 text-lg">
      <h4>Create album</h4>
    </div>

    <div class="p-6 space-y-3 flex-1">
      <div>
        <label> Album Name </label>
        <input type="text" class="with-border" placeholder="" />
      </div>
      <div>
        <label> Visibilty </label>
        <select id="" name="" class="shadow-none selectpicker with-border">
          <option data-icon="uil-bullseye">Private</option>
          <option data-icon="uil-chat-bubble-user">My Following</option>
          <option data-icon="uil-layer-group-slash">Unlisted</option>
          <option data-icon="uil-globe" selected>Puplic</option>
        </select>
      </div>
      <div uk-form-custom class="w-full py-3">
        <div
          class="bg-gray-100 border-2 border-dashed flex flex-col h-32 items-center justify-center relative w-full rounded-lg dark:bg-gray-800 dark:border-gray-600"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            class="w-12"
          >
            <path
              d="M5.5 13a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 13H11V9.413l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13H5.5z"
            />
            <path d="M9 13h2v5a1 1 0 11-2 0v-5z" />
          </svg>
        </div>
        <input type="file" />
      </div>
    </div>
    <div class="p-5">
      <button type="button" class="button w-full">Create Now</button>
    </div>
  </div>
</div>

<!-- Report User Modal -->
<div id="report-user-modal" class="uk-flex-top" uk-modal>
  <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical rounded-lg">
    <button class="uk-modal-close-default" type="button" uk-close></button>

    <!-- Step 1: Select Reason -->
    <div id="report-user-step-1">
      <h2 class="uk-modal-title">Select a Reason</h2>
      <ul class="uk-list uk-list-divider">
        <li>
          <a
            href="#"
            class="report-user-reason-option"
            data-reason="It's posting content that shouldn't be on RentAll"
            >It's posting content that shouldn't be on RentAll</a
          >
        </li>
        <li>
          <a
            href="#"
            class="report-user-reason-option"
            data-reason="It's pretending to be someone else"
            >It's pretending to be someone else</a
          >
        </li>
        <li>
          <a
            href="#"
            class="report-user-reason-option"
            data-reason="It may be under the age of 13"
            >It may be under the age of 13</a
          >
        </li>
        <li>
          <a href="#" class="report-user-reason-option" data-reason="Others"
            >Others</a
          >
        </li>
      </ul>
    </div>

    <!-- Step 2: Description -->
    <div id="report-user-step-2" style="display: none">
      <h2 id="report-user-title" class="uk-modal-title"></h2>
      <form id="report-user-form">
        {% csrf_token %}
        <input
          type="hidden"
          name="reported_user_id"
          value="{{ profile.user.id }}"
        />
        <input
          type="hidden"
          id="report-user-reason-input"
          name="reason"
          value=""
        />

        <div class="uk-margin">
          <label class="uk-form-label" for="report-user-description"
            >Report Description</label
          >
          <div class="uk-form-controls">
            <textarea
              id="report-user-description"
              name="description"
              class="uk-textarea"
              rows="4"
              maxlength="200"
              placeholder="Provide more details (200 characters max)"
            ></textarea>
          </div>
        </div>
        <div class="uk-text-right">
          <button class="button bg-blue-600 text-white" type="submit">
            Send Report
          </button>
        </div>
      </form>
    </div>

    <!-- Step 3: Success Message -->
    <div id="report-user-step-3" style="display: none">
      <h2 class="uk-modal-title text-green-500">Report Sent Successfully</h2>
      <p>
        Thank you for your report. We will review it and take appropriate
        action. You will be notified of the status.
      </p>
      <div class="uk-text-right mt-4">
        <button
          class="uk-modal-close button bg-gray-200 text-gray-700"
          type="button"
        >
          Close
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  //bila user upload pic, ada preview gambaq kt create post
  var loadFile = function (event) {
    var output2 = document.getElementById("preview_post_thumbnail");
    output2.src = URL.createObjectURL(event.target.files[0]);
    output2.onload = function () {
      //URL.revokeObjectURL(output2.src); // free memory
      URL.createObjectURL(output2.src);
    };
  };

  // AJAX for Saving Post
  window.addEventListener("load", function () {
    $(document).on("click", ".save-post-btn", function () {
      let id = $(this).attr("data-post-id");
      let this_val = $(this);
      let save_text_span = this_val.find(".save-text");

      $.ajax({
        url: "{% url 'core:save_post' %}",
        data: {
          id: id,
        },
        dataType: "json",
        success: function (res) {
          if (res.is_saved === true) {
            save_text_span.text(" Unsave Post");
            this_val.addClass("text-blue-500");
            UIkit.notification({
              message: "Post Saved successfully",
              status: "primary",
              pos: "top-right",
              timeout: 5000,
            });
          } else {
            save_text_span.text(" Save Post");
            this_val.removeClass("text-blue-500");
            UIkit.notification({
              message: "Post Unsaved successfully",
              status: "danger",
              pos: "top-right",
              timeout: 5000,
            });
          }
        },
        error: function (err) {
          console.log(err);
          UIkit.notification({
            message: "An error occurred. Please try again.",
            status: "danger",
            pos: "top-right",
            timeout: 5000,
          });
        },
      });
    });

    // Handle user report reason selection
    $(".report-user-reason-option").on("click", function (e) {
      e.preventDefault();
      const reason = $(this).data("reason");
      $("#report-user-title").text(reason);
      $("#report-user-reason-input").val(reason);
      $("#report-user-step-1").hide();
      $("#report-user-step-3").hide();
      $("#report-user-step-2").show();
    });

    // Reset user report modal on close
    UIkit.util.on("#report-user-modal", "hidden", function () {
      $("#report-user-step-1").show();
      $("#report-user-step-2").hide();
      $("#report-user-step-3").hide();
      $("#report-user-form")[0].reset();
    });

    // Handle user report form submission
    $("#report-user-form").on("submit", function (e) {
      e.preventDefault();
      $.post(
        "{% url 'core:submit-user-report' %}",
        $(this).serialize(),
        function (response) {
          if (response.status === "success") {
            $("#report-user-step-2").hide();
            $("#report-user-step-3").show();
          } else {
            UIkit.notification({
              message: response.message,
              status: "danger",
              pos: "top-center",
            });
          }
        }
      );
    });

    // AJAX for Add Friend (instant add, one-directional)
    $(document).on("click", ".add-friend-btn", function (e) {
      e.preventDefault();
      e.stopPropagation();

      console.log("Add friend button clicked");

      let friend_id = $(this).attr("data-friend-id");
      let btn = $(this);
      let text_span = btn.find(".friend-text");

      console.log("Friend ID:", friend_id);

      $.ajax({
        url: "{% url 'core:add-friend' %}",
        dataType: "json",
        data: {
          id: friend_id,
        },
        success: function (res) {
          console.log("Response received:", res);

          if (res.bool === true) {
            // Friend added successfully - change to Unfollow button
            text_span.html('<i class="fas fa-user-minus"></i> Unfollow');
            btn
              .removeClass("bg-blue-600 add-friend-btn")
              .addClass("bg-red-600 unfriend-btn");
            btn.attr("data-unfriend", friend_id);
            btn.removeAttr("data-friend-id");
            UIkit.notification({
              message: "Friend Added Successfully",
              status: "success",
              pos: "top-right",
              timeout: 3000,
            });
          } else if (res.error) {
            console.log("Error from server:", res.error);
            UIkit.notification({
              message: res.error,
              status: "warning",
              pos: "top-right",
              timeout: 3000,
            });
          }
        },
        error: function (err) {
          console.log("AJAX Error:", err);
          console.log("Response text:", err.responseText);
          UIkit.notification({
            message: "An error occurred. Please try again.",
            status: "danger",
            pos: "top-right",
            timeout: 3000,
          });
        },
      });

      return false;
    });

    // AJAX for Unfriend
    $(document).on("click", ".unfriend-btn", function (e) {
      e.preventDefault();
      let friend_id = $(this).attr("data-unfriend");
      let btn = $(this);
      let text_span = btn.find(".unfriend-text");

      $.ajax({
        url: "{% url 'core:unfriend' %}",
        dataType: "json",
        data: {
          id: friend_id,
        },
        success: function (res) {
          if (res.success) {
            // Unfriended - change to Follow button
            text_span.html('<i class="fas fa-user-plus"></i> Follow');
            btn
              .removeClass("bg-red-600 unfriend-btn")
              .addClass("bg-blue-600 add-friend-btn");
            btn.attr("data-friend-id", friend_id);
            btn.removeAttr("data-unfriend");
            text_span.removeClass("unfriend-text").addClass("friend-text");

            UIkit.notification({
              message: "Unfollowed Successfully",
              status: "success",
              pos: "top-right",
              timeout: 3000,
            });
          }
        },
        error: function (err) {
          console.log(err);
          UIkit.notification({
            message: "An error occurred. Please try again.",
            status: "danger",
            pos: "top-right",
            timeout: 3000,
          });
        },
      });
    });
  });
</script>

{% endblock content %}
