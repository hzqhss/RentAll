{% extends 'partials/base.html' %} {% load static %} {% block content %}
<div class="main_content">
    <div class="mcontainer">

        <div class="bg-white lg:p-10 p-6 rounded-2xl shadow-sm">

            <div class="lg:text-2xl text-xl font-semibold mb-6"> General Settings </div>

            <!-- Profile Update Form -->
            <form method="POST" class="space-y-6">
                {% csrf_token %}
                <input type="hidden" name="update_profile" value="1">
                
                <div>
                    <label for="username" class="text-sm font-medium">Username</label>
                    {{ profile_form.username }}
                    {% for error in profile_form.username.errors %}
                        <div class="text-red-500 text-xs mt-1">{{ error }}</div>
                    {% endfor %}
                </div>

                <div>
                    <label for="full_name" class="text-sm font-medium">Full Name</label>
                    {{ profile_form.full_name }}
                    {% for error in profile_form.full_name.errors %}
                        <div class="text-red-500 text-xs mt-1">{{ error }}</div>
                    {% endfor %}
                </div>

                <div>
                    <label for="email" class="text-sm font-medium">Email Address</label>
                    {{ profile_form.email }}
                </div>
                
                <div>
                    <label for="gender" class="text-sm font-medium">Gender</label>
                    {{ profile_form.gender }}
                </div>

                <div>
                    <label for="phone" class="text-sm font-medium">Phone Number</label>
                    {{ profile_form.phone }}
                </div>

                <div class="flex justify-center">
                    <button type="submit" class="button bg-blue-600 text-white"> Save Profile Changes </button>
                </div>
            </form>

            <hr class="my-8">

            <div class="lg:text-2xl text-xl font-semibold mb-6"> Change Password </div>

            <!-- Password Change Form -->
            <form method="POST" class="space-y-6">
                {% csrf_token %}
                <input type="hidden" name="change_password" value="1">
                
                {% if password_form.non_field_errors %}
                    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
                        {{ password_form.non_field_errors }}
                    </div>
                {% endif %}
                
                <div>
                    <label for="id_old_password" class="text-sm font-medium">Current Password</label>
                    {{ password_form.old_password }}
                    {% for error in password_form.old_password.errors %}
                        <div class="text-red-500 text-xs mt-1">{{ error }}</div>
                    {% endfor %}
                </div>
                
                <div>
                    <label for="id_new_password1" class="text-sm font-medium">New Password</label>
                    {{ password_form.new_password1 }}
                    {% for error in password_form.new_password1.errors %}
                        <div class="text-red-500 text-xs mt-1">{{ error }}</div>
                    {% endfor %}
                </div>
                
                <div>
                    <label for="id_new_password2" class="text-sm font-medium">Confirm New Password</label>
                    {{ password_form.new_password2 }}
                     {% for error in password_form.new_password2.errors %}
                        <div class="text-red-500 text-xs mt-1">{{ error }}</div>
                    {% endfor %}
                </div>

                <div class="flex justify-center">
                    <button type="submit" class="button bg-blue-600 text-white"> Change Password </button>
                </div>
            </form>

            <hr class="my-8">

            <div>
                <h3 class="font-medium text-lg mb-2"> General Policies </h3>
                <p class="text-gray-600"> By using RentAll, you agree to our <a href="#" class="text-blue-500">Terms of Service</a> and <a href="#" class="text-blue-500">Privacy Policy</a>. You are responsible for the items you list and rent. Please ensure all interactions are respectful and transactions are handled securely. We may review account activity to enforce our policies. </p>
            </div>

        </div>

    </div>
</div>
{% endblock content %}